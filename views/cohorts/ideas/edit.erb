<div class="container-fluid text-center">
  <div class="row content">
    <div class="col-sm-2 sidenav">
    </div>
    <div class="col-sm-8 text-left">
      <div id="container">
        <div id="container_2">
          <form method='post' action="<%=ENV['BACKEND']%>/api/v1/cohorts/ideas/<%=params[:id]%>/edit" style='text-align:left'>
            <input id="hidden" type="hidden" name="_method" value="post">
            <p>
              <strong>Project Title:</strong>
              <textarea rows="1" cols="100" name="title" id="title"></textarea>
            </p>
            <p>
              <strong>Pitch: </strong>
              A sentence that explains the value proposition of the application
              <textarea rows="1" cols="100" name="pitch" id="pitch"></textarea>
            </p>
            <p>
              <strong>Problem: </strong>
              1–3 sentences describing the problem that you are trying to solve
              <textarea rows="1" cols="100" name="problem" id="problem"></textarea>
            </p>
            <p>
              <strong>Solution: </strong>
              1–3 sentences describing how your application will solve that problem
              <textarea rows="1" cols="100" name="solution" id="solution"></textarea>
            </p>
            <p>
              <strong>Audience: </strong>
              1–3 sentences describing what type of user your app would be applicable to
              <textarea rows="1" cols="100" name="audience" id="audience"></textarea>
            </p>
            <p>
              <strong>Features: </strong>
              What features will your app include to solve the problem?
              <textarea rows="1" cols="100" name="features" id="features"></textarea>
            </p>
            <p><strong>Integrations </strong></p>
            <p>
              Which APIs will you use?
              <textarea rows="1" cols="100" name="apis" id="apis"></textarea>
            </p>
            <p>
              Which OAuth integration are you planning to use?
              <textarea rows='1' cols='100' name="oauth" id="oauth"></textarea>
            </p>
            <input type="submit" value='Update Idea' formmethod="post" id='update_btn'>
          </form>
        </div>
      </div>
    </div>
    <div class="col-sm-2 sidenav">
    </div>
  </div>
</div>

<script type="text/javascript" defer>
  var url = '<%= ENV['BACKEND'] %>';
  var idea_id = '<%= params[:id] %>';
  fetch(`${url}/api/v1/cohorts/ideas/${idea_id}`, {credentials: 'include'}).then(function(result) {
    return result.json();
  }).then(function(json) {
    displayResults(json);
  });
  function displayResults(json) {
     idea = json.data;
     $("#title").val(idea['attributes']['title']).attr('disabled', false);
     $("#pitch").val(idea['attributes']['pitch']).attr('disabled', false);
     $("#problem").val(idea['attributes']['problem']).attr('disabled', false);
     $("#solution").val(idea['attributes']['solution']).attr('disabled', false);
     $("#audience").val(idea['attributes']['audience']).attr('disabled', false);
     $("#features").val(idea['attributes']['features']).attr('disabled', false);
     $("#apis").val(idea['attributes']['apis']).attr('disabled', false);
     $("#oauth").val(idea['attributes']['oauth']).attr('disabled', false);
   };
</script>
