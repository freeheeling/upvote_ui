<div class="container-fluid text-center">
  <div class="row content">
    <div class="col-sm-2 sidenav">
    </div>
    <div class="col-sm-8 text-left">
      <div id="container">
      <div id="container_2">

      </div>
      </div>

    </div>
    <div class="col-sm-2 sidenav">
    </div>
  </div>
</div>

<script type="text/javascript" defer>
  fetch('http://localhost:3000/api/v1/cohorts/ideas').then(function(result) {
    return result.json();
  }).then(function(json) {
    displayResults(json);
  });

  function displayResults(json) {

    const ideas = json.data;

    for(var i = 0; i < ideas.length; i++) {
      const responsive = document.createElement('responsive');
      const gallery = document.createElement('gallery');
      const idea = document.createElement('idea');
      const title = document.createElement('h2');
      const pitch = document.createElement('p');
      var btn = document.createElement("button");
      var form = document.createElement('form');
      form.setAttribute('method', 'post');



      let current = ideas[i];
      console.log(current);

      title.textContent = current.attributes.title
      pitch.textContent = current.attributes.pitch
      var idea_id = current.id
      form.setAttribute('action', `http://localhost:3000/api/v1/cohorts/ideas/${idea_id}`)
      btn.innerHTML = "Vote";
      btn.setAttribute('type', 'submit');

      form.appendChild(btn);
      idea.appendChild(title);
      idea.appendChild(pitch);
      idea.appendChild(form);
      gallery.appendChild(idea);
      responsive.appendChild(gallery);
      document.getElementById("container_2").appendChild(responsive);

    }
  }
</script>
